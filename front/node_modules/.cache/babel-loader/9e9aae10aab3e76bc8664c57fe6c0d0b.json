{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\louis\\\\killer\\\\front\\\\src\\\\components\\\\team\\\\TeamGestion.jsx\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Icon, Divider, Form, Portal, Message, Table, Header } from 'semantic-ui-react';\nimport axios from 'axios';\nimport ImageUploader from '../utils/ImageUploader';\nimport config from '../../config.json';\nimport nameParser from '../../utils/nameParser';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass TeamGestion extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = data => {\n      if ('picture' in data.object) {\n        this.props.updatePic(data.object.picture);\n        this.makeFeedback(\"positive\", \"Image mise a jour\");\n      }\n\n      this.setState({\n        showModal: false\n      });\n    };\n\n    this.handleSubmitForm = () => {\n      axios({\n        method: 'put',\n        url: `${config.back_Url}/teams/${this.props.team.id}`,\n        headers: {\n          Token: localStorage.getItem('killerToken')\n        },\n        data: {\n          name: this.state.name,\n          faction: this.state.faction,\n          score: this.state.score,\n          money: this.state.money\n        }\n      }).then(data => {\n        if (data.status === 200) {\n          const up = data.data;\n          this.props.updateState(up.name, up.faction, up.money, up.score);\n        }\n      });\n    };\n\n    this.handleDelete = () => {\n      axios({\n        method: 'delete',\n        url: `${config.back_Url}/teams/${this.props.team.id}`,\n        headers: {\n          Token: localStorage.getItem('killerToken')\n        }\n      }).then(data => {\n        if (data.data.status === 200) {\n          localStorage.setItem('teamId', null);\n          window.location.assign('/');\n        } else {// erreur\n        }\n      });\n    };\n\n    this.componentDidMount = () => {\n      this.setState({\n        faction: this.props.team.faction,\n        name: this.props.team.name,\n        score: this.props.team.score,\n        money: this.props.team.money,\n        teamItems: this.props.team.teamItems\n      });\n      this.getAllItems();\n    };\n\n    this.handleChange = event => {\n      const {\n        target\n      } = event;\n      const {\n        value\n      } = target;\n      const {\n        name\n      } = target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.makeFeedback = (variant, message) => {\n      this.setState({\n        message,\n        variant,\n        open: true\n      });\n      setTimeout(() => {\n        this.setState({\n          message: '',\n          variant: 'positive',\n          open: false\n        });\n      }, 5000);\n    };\n\n    this.isAllowedToChangeFaction = () => {\n      // tous les horraires sont UTC donc 18h UTC correspond à 20h en France\n      const debutPeriode = 18;\n      return new Date().getUTCHours() >= debutPeriode || this.props.admin;\n    };\n\n    this.handleSubmitChangeTeam = () => {\n      const {\n        name,\n        faction,\n        money,\n        score\n      } = this.state;\n      this.makeFeedback('positive', name.toString() + ' ' + faction.toString());\n      axios({\n        method: 'put',\n        url: `${config.back_Url}/teams/${this.props.team.id}`,\n        headers: {\n          Token: localStorage.getItem('killerToken')\n        },\n        data: {\n          name: name,\n          faction: faction,\n          money: money,\n          score: score\n        }\n      }).then(data => {\n        if (data.data.status === 200) {\n          const up = data.data.object;\n          this.props.updateState(up.faction);\n        } else {\n          this.makeFeedback('negative', 'erreur du cul');\n        }\n      });\n    };\n\n    this.handleChangeRadio = value => {\n      if (this.isAllowedToChangeFaction()) {\n        this.setState({\n          faction: value\n        });\n      } else {\n        this.makeFeedback('negative', 'attends 20h pour pouvoir toucher a ça petit con');\n      }\n    };\n\n    this.getAllItems = () => {\n      axios({\n        method: 'get',\n        url: `${config.back_Url}/items/`,\n        headers: {\n          Token: localStorage.getItem('killerToken')\n        }\n      }).then(result => {\n        console.log(result.data.object);\n        this.setState({\n          allItems: result.data.object\n        });\n      });\n    };\n\n    this.buyItem = item => {\n      axios.post(`${config.back_Url}/items/${this.props.team.id}`, {\n        itemId: item.id,\n        price: 25,\n        money: this.state.money\n      }, {\n        headers: {\n          Token: localStorage.getItem('killerToken')\n        }\n      }).then(async r => {\n        if (r.data.status !== 200) this.makeFeedback('negative', r.data.message);else {\n          const itemBought = {\n            description: item.description,\n            name: item.name,\n            itemId: item.itemId\n          }; // this.props.updateState({money: this.state.money - 25})\n\n          this.setState({\n            money: this.state.money - 25\n          });\n          this.state.teamItems.push(itemBought);\n          await this.getAllItems();\n          this.makeFeedback('positive', \"objets mis a jour avec succés\");\n        }\n      }); // .catch(e => {\n      //         this.makeFeedback(\n      //             'negative',\n      //             e.message,\n      //         );\n      //     }\n      // )\n    };\n\n    this.deleteItem = item => {\n      axios.post(`${config.back_Url}/items/delete/${this.props.team.id}`, {\n        itemId: item.itemId\n      }, {\n        headers: {\n          Token: localStorage.getItem('killerToken')\n        }\n      }).then(async r => {\n        const itemToRemove = this.state.teamItems.find(i => i.itemId === item.itemId);\n        this.setState({\n          teamItems: this.state.teamItems.filter(i => i !== itemToRemove)\n        });\n        await this.getAllItems();\n        this.makeFeedback('positive', r.data.message);\n      }).catch(e => {\n        this.makeFeedback('negative', e.message);\n      });\n    };\n\n    this.state = {\n      showModal: false,\n      faction: '',\n      name: '',\n      money: 0,\n      score: 0,\n      message: '',\n      variant: 'negative',\n      open: false,\n      allItems: [],\n      teamItems: []\n    };\n  }\n\n  render() {\n    const {\n      team\n    } = this.props;\n    const {\n      faction,\n      score,\n      name,\n      money,\n      message,\n      variant,\n      open,\n      allItems,\n      teamItems\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"TeamGestion\",\n      children: [/*#__PURE__*/_jsxDEV(Portal, {\n        open: open,\n        children: /*#__PURE__*/_jsxDEV(Message, {\n          style: {\n            left: '20px',\n            position: 'fixed',\n            bottom: '20px',\n            zIndex: 1000\n          },\n          negative: variant === 'negative',\n          positive: variant === 'positive',\n          children: [/*#__PURE__*/_jsxDEV(Message.Header, {\n            children: variant === 'negative' ? 'Une erreur est survenue' : \"Tout s'est déroulé comme prévu\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 25\n          }, this), message]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Gestion\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        size: \"small\",\n        type: \"button\",\n        onClick: () => this.setState({\n          showModal: true\n        }),\n        children: [/*#__PURE__*/_jsxDEV(Icon, {\n          name: \"photo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 21\n        }, this), \"Uploader une photo\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        size: \"small\",\n        color: \"red\",\n        type: \"button\",\n        onClick: this.handleDelete,\n        children: [/*#__PURE__*/_jsxDEV(Icon, {\n          name: \"trash\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 21\n        }, this), \"Supprimer l'\\xE9quipe\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ImageUploader, {\n        uploadUrl: `/teams/${team.id}`,\n        type: \"team\",\n        open: this.state.showModal,\n        handleSubmit: this.handleSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 17\n      }, this), this.props.admin ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Objets de l'\\xE9quipe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          celled: true,\n          padded: true,\n          sortable: true,\n          children: [/*#__PURE__*/_jsxDEV(Table.Header, {\n            children: /*#__PURE__*/_jsxDEV(Table.Row, {\n              children: [/*#__PURE__*/_jsxDEV(Table.HeaderCell, {\n                children: \"Nom\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Table.HeaderCell, {\n                children: \"Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Table.Body, {\n            children: teamItems.map((item, key) => /*#__PURE__*/_jsxDEV(Table.Row, {\n              children: [/*#__PURE__*/_jsxDEV(Table.Cell, {\n                textAlign: \"center\",\n                children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                  children: item.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Table.Cell, {\n                children: item.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Table.Cell, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  style: {\n                    marginLeft: '2em'\n                  },\n                  onClick: () => this.deleteItem(item),\n                  negative: true,\n                  children: \"Utiliser\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 37\n              }, this)]\n            }, key, true, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Header, {\n          as: \"h2\",\n          children: \"Acheter un objet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Table, {\n            celled: true,\n            padded: true,\n            sortable: true,\n            children: [/*#__PURE__*/_jsxDEV(Table.Header, {\n              children: /*#__PURE__*/_jsxDEV(Table.Row, {\n                children: [/*#__PURE__*/_jsxDEV(Table.HeaderCell, {\n                  children: \"Nom\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Table.HeaderCell, {\n                  children: \"Description\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Table.HeaderCell, {\n                  children: \"Acheter\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Table.Body, {\n              children: allItems.map((item, key) => {\n                return /*#__PURE__*/_jsxDEV(Table.Row, {\n                  children: [/*#__PURE__*/_jsxDEV(Table.Cell, {\n                    textAlign: \"center\",\n                    children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                      children: item.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 330,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 329,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(Table.Cell, {\n                    children: item.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 333,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(Table.Cell, {\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      style: {\n                        marginLeft: '2em'\n                      },\n                      onClick: () => this.buyItem(item),\n                      positive: true,\n                      children: \"Acheter\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 334,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 334,\n                    columnNumber: 45\n                  }, this)]\n                }, key, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 328,\n                  columnNumber: 49\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: this.handleSubmitForm,\n          className: \"spacing\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Field, {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Nom\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              value: name,\n              name: \"name\",\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Argent\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              value: money,\n              name: \"money\",\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Form.Field, {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Score\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              value: score,\n              name: \"score\",\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            inline: true,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Faction\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Form.Radio, {\n              label: nameParser('OUVRIER'),\n              value: \"OUVRIER\",\n              checked: faction === 'OUVRIER',\n              onClick: () => this.handleChangeRadio('OUVRIER')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Form.Radio, {\n              label: nameParser('NOBLE'),\n              value: \"NOBLE\",\n              checked: faction === 'NOBLE',\n              onClick: () => this.handleChangeRadio('NOBLE')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Form.Radio, {\n              label: nameParser('AMET'),\n              value: \"AMET\",\n              checked: faction === 'AMET',\n              onClick: () => this.handleChangeRadio('AMET')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => this.handleSubmitChangeTeam(),\n            children: \"Modifier l'\\xE9quipe\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            inline: true,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Faction\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Form.Radio, {\n              label: nameParser('OUVRIER'),\n              value: \"OUVRIER\",\n              checked: faction === 'OUVRIER',\n              onClick: () => this.handleChangeRadio('OUVRIER')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Form.Radio, {\n              label: nameParser('NOBLE'),\n              value: \"NOBLE\",\n              checked: faction === 'NOBLE',\n              onClick: () => this.handleChangeRadio('NOBLE')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Form.Radio, {\n              label: nameParser('AMET'),\n              value: \"AMET\",\n              checked: faction === 'AMET',\n              onClick: () => this.handleChangeRadio('AMET')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => this.handleSubmitChangeTeam(),\n            children: \"Modifier l'\\xE9quipe\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nTeamGestion.propTypes = {\n  admin: PropTypes.bool.isRequired,\n  team: PropTypes.shape({\n    id: PropTypes.number,\n    picture: PropTypes.string,\n    name: PropTypes.string,\n    faction: PropTypes.oneOf(['NOBLE', 'OUVRIER', 'AMET']),\n    score: PropTypes.number,\n    money: PropTypes.number\n  }).isRequired,\n  updatePic: PropTypes.func.isRequired,\n  updateState: PropTypes.func.isRequired\n};\nTeamGestion.defaultProp = {\n  admin: false\n};\nexport default TeamGestion;","map":{"version":3,"sources":["C:/Users/louis/killer/front/src/components/team/TeamGestion.jsx"],"names":["React","Component","PropTypes","Button","Icon","Divider","Form","Portal","Message","Table","Header","axios","ImageUploader","config","nameParser","TeamGestion","constructor","props","handleSubmit","data","object","updatePic","picture","makeFeedback","setState","showModal","handleSubmitForm","method","url","back_Url","team","id","headers","Token","localStorage","getItem","name","state","faction","score","money","then","status","up","updateState","handleDelete","setItem","window","location","assign","componentDidMount","teamItems","getAllItems","handleChange","event","target","value","variant","message","open","setTimeout","isAllowedToChangeFaction","debutPeriode","Date","getUTCHours","admin","handleSubmitChangeTeam","toString","handleChangeRadio","result","console","log","allItems","buyItem","item","post","itemId","price","r","itemBought","description","push","deleteItem","itemToRemove","find","i","filter","catch","e","render","left","position","bottom","zIndex","map","key","marginLeft","propTypes","bool","isRequired","shape","number","string","oneOf","func","defaultProp"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n    Button, Icon, Divider, Form, Portal, Message, Table, Header,\r\n} from 'semantic-ui-react';\r\nimport axios from 'axios';\r\nimport ImageUploader from '../utils/ImageUploader';\r\nimport config from '../../config.json';\r\nimport nameParser from '../../utils/nameParser';\r\n\r\nclass TeamGestion extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            showModal: false,\r\n            faction: '',\r\n            name: '',\r\n            money: 0,\r\n            score: 0,\r\n            message: '',\r\n            variant: 'negative',\r\n            open: false,\r\n            allItems: [],\r\n            teamItems:[],\r\n        };\r\n    }\r\n\r\n    handleSubmit = (data) => {\r\n        if ('picture' in data.object) {\r\n            this.props.updatePic(data.object.picture);\r\n            this.makeFeedback(\"positive\", \"Image mise a jour\")\r\n        }\r\n        this.setState({showModal: false});\r\n    }\r\n\r\n    handleSubmitForm = () => {\r\n        axios({\r\n            method: 'put',\r\n            url: `${config.back_Url}/teams/${this.props.team.id}`,\r\n            headers: {Token: localStorage.getItem('killerToken')},\r\n            data: {\r\n                name: this.state.name,\r\n                faction: this.state.faction,\r\n                score: this.state.score,\r\n                money: this.state.money,\r\n            },\r\n        }).then((data) => {\r\n            if (data.status === 200) {\r\n                const up = data.data;\r\n                this.props.updateState(up.name, up.faction, up.money, up.score);\r\n            }\r\n        });\r\n    }\r\n\r\n    handleDelete = () => {\r\n        axios({\r\n            method: 'delete',\r\n            url: `${config.back_Url}/teams/${this.props.team.id}`,\r\n            headers: {Token: localStorage.getItem('killerToken')},\r\n        }).then((data) => {\r\n            if (data.data.status === 200) {\r\n                localStorage.setItem('teamId', null);\r\n                window.location.assign('/');\r\n            } else {\r\n                // erreur\r\n            }\r\n        });\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.setState({\r\n            faction: this.props.team.faction,\r\n            name: this.props.team.name,\r\n            score: this.props.team.score,\r\n            money: this.props.team.money,\r\n            teamItems: this.props.team.teamItems,\r\n        });\r\n        this.getAllItems();\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        const {target} = event;\r\n        const {value} = target;\r\n        const {name} = target;\r\n\r\n        this.setState({\r\n            [name]: value,\r\n        });\r\n    }\r\n\r\n    makeFeedback = (variant, message) => {\r\n        this.setState({\r\n            message,\r\n            variant,\r\n            open: true,\r\n        });\r\n        setTimeout(() => {\r\n            this.setState({\r\n                message: '',\r\n                variant: 'positive',\r\n                open: false,\r\n            });\r\n        }, 5000);\r\n    }\r\n\r\n    isAllowedToChangeFaction = () => {\r\n        // tous les horraires sont UTC donc 18h UTC correspond à 20h en France\r\n        const debutPeriode = 18;\r\n        return (((new Date()).getUTCHours() >= debutPeriode) || (this.props.admin));\r\n    }\r\n\r\n    handleSubmitChangeTeam = () => {\r\n        const {\r\n            name, faction, money, score,\r\n        } = this.state;\r\n        this.makeFeedback('positive', name.toString() + ' ' + faction.toString(),)\r\n\r\n        axios({\r\n            method: 'put',\r\n            url: `${config.back_Url}/teams/${this.props.team.id}`,\r\n            headers: {Token: localStorage.getItem('killerToken')},\r\n            data: {\r\n                name: name,\r\n                faction: faction,\r\n                money: money,\r\n                score: score,\r\n            },\r\n        }).then((data) => {\r\n            if (data.data.status === 200) {\r\n                const up = data.data.object;\r\n                this.props.updateState(up.faction);\r\n            } else {\r\n                this.makeFeedback(\r\n                    'negative',\r\n                    'erreur du cul',\r\n                );\r\n            }\r\n        });\r\n    }\r\n\r\n    handleChangeRadio = (value) => {\r\n        if (this.isAllowedToChangeFaction()) {\r\n            this.setState({faction: value});\r\n        } else {\r\n            this.makeFeedback('negative', 'attends 20h pour pouvoir toucher a ça petit con');\r\n        }\r\n    }\r\n\r\n    getAllItems = () => {\r\n        axios({\r\n            method: 'get',\r\n            url: `${config.back_Url}/items/`,\r\n            headers: {Token: localStorage.getItem('killerToken')},\r\n        }).then((result) => {\r\n            console.log(result.data.object)\r\n\r\n            this.setState({allItems: result.data.object})\r\n        });\r\n    }\r\n\r\n    buyItem = (item) => {\r\n        axios.post(`${config.back_Url}/items/${this.props.team.id}`,\r\n            {\r\n                itemId: item.id,\r\n                price: 25,\r\n                money: this.state.money,\r\n            }, {\r\n                headers: {Token: localStorage.getItem('killerToken')}\r\n            }\r\n        ).then(async r => {\r\n            if (r.data.status !== 200) this.makeFeedback(\r\n                'negative',\r\n                r.data.message,\r\n            );\r\n            else {\r\n                const itemBought = {\r\n                    description: item.description,\r\n                    name: item.name,\r\n                    itemId: item.itemId,\r\n                }\r\n\r\n                // this.props.updateState({money: this.state.money - 25})\r\n\r\n                this.setState({\r\n                    money: this.state.money - 25\r\n                })\r\n\r\n                this.state.teamItems.push(itemBought)\r\n\r\n                await this.getAllItems()\r\n\r\n                this.makeFeedback(\r\n                    'positive',\r\n                    \"objets mis a jour avec succés\",\r\n                );\r\n            }\r\n        })\r\n        // .catch(e => {\r\n        //         this.makeFeedback(\r\n        //             'negative',\r\n        //             e.message,\r\n        //         );\r\n        //     }\r\n        // )\r\n    }\r\n\r\n\r\n    deleteItem = (item) => {\r\n        axios.post(`${config.back_Url}/items/delete/${this.props.team.id}`,\r\n            {\r\n                itemId: item.itemId,\r\n            }, {\r\n                headers: {Token: localStorage.getItem('killerToken')}\r\n            }\r\n        ).then(async r => {\r\n\r\n            const itemToRemove = this.state.teamItems.find((i) => i.itemId === item.itemId)\r\n\r\n            this.setState({\r\n                teamItems: this.state.teamItems.filter((i) => i !== itemToRemove),\r\n            })\r\n\r\n            await this.getAllItems()\r\n\r\n            this.makeFeedback(\r\n                'positive',\r\n                r.data.message,\r\n            );\r\n        })\r\n        .catch(e => {\r\n\r\n                this.makeFeedback(\r\n                    'negative',\r\n                    e.message,\r\n                );\r\n            }\r\n        )\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    render() {\r\n        const {team} = this.props;\r\n        const {\r\n            faction, score, name, money, message, variant, open, allItems, teamItems,\r\n        } = this.state;\r\n        return (\r\n\r\n            <div className=\"TeamGestion\">\r\n                <Portal open={open}>\r\n                    <Message\r\n                        style={{\r\n                            left: '20px',\r\n                            position: 'fixed',\r\n                            bottom: '20px',\r\n                            zIndex: 1000,\r\n                        }}\r\n                        negative={variant === 'negative'}\r\n                        positive={variant === 'positive'}\r\n                    >\r\n                        <Message.Header>{variant === 'negative' ? 'Une erreur est survenue' : \"Tout s'est déroulé comme prévu\"}</Message.Header>\r\n                        {message}\r\n                    </Message>\r\n                </Portal>\r\n                <Divider/>\r\n                <h2>Gestion</h2>\r\n                <Button size=\"small\" type=\"button\" onClick={() => this.setState({showModal: true})}>\r\n                    <Icon name=\"photo\"/>\r\n                    Uploader une photo\r\n                </Button>\r\n                <Button size=\"small\" color=\"red\" type=\"button\" onClick={this.handleDelete}>\r\n                    <Icon name=\"trash\"/>\r\n                    Supprimer l&apos;équipe\r\n                </Button>\r\n                <ImageUploader uploadUrl={`/teams/${team.id}`} type=\"team\" open={this.state.showModal}\r\n                               handleSubmit={this.handleSubmit}/>\r\n                {this.props.admin ? (\r\n                    \r\n                    <div>\r\n\r\n                    <Divider/>\r\n                    <h2>Objets de l'équipe</h2>\r\n                    <Table celled padded sortable>\r\n                        <Table.Header>\r\n                            <Table.Row>\r\n                                <Table.HeaderCell>Nom</Table.HeaderCell>\r\n                                <Table.HeaderCell>Description</Table.HeaderCell>\r\n                            </Table.Row>\r\n                        </Table.Header>\r\n                        <Table.Body>\r\n                            {teamItems.map((item, key) => (\r\n                                <Table.Row key={key}>\r\n                                    <Table.Cell textAlign=\"center\">\r\n                                        <h5>{item.name}</h5>\r\n                                    </Table.Cell>\r\n                                    <Table.Cell>{item.description}</Table.Cell>\r\n                                    <Table.Cell><Button style={{marginLeft: '2em'}}\r\n                                                        onClick={() => this.deleteItem(item)} negative>\r\n                                        Utiliser\r\n                                    </Button>\r\n                                    </Table.Cell>\r\n\r\n                                </Table.Row>\r\n                            ))}\r\n                        </Table.Body>\r\n                    </Table>\r\n\r\n\r\n\r\n\r\n\r\n\r\n                    <Header as=\"h2\">Acheter un objet</Header>\r\n                    <div>\r\n                    <Divider/>\r\n                    <Table celled padded sortable>\r\n                        <Table.Header>\r\n                            <Table.Row>\r\n                                <Table.HeaderCell>Nom</Table.HeaderCell>  \r\n                                <Table.HeaderCell>Description</Table.HeaderCell>\r\n                                <Table.HeaderCell>Acheter</Table.HeaderCell>\r\n                            </Table.Row>\r\n                        </Table.Header>\r\n                        <Table.Body>\r\n                            {allItems.map((item, key) => {\r\n                                        return (<Table.Row key={key}>\r\n                                            <Table.Cell textAlign=\"center\">\r\n                                                <h5>{item.name}</h5>\r\n                                            </Table.Cell>\r\n                                        \r\n                                            <Table.Cell>{item.description}</Table.Cell>\r\n                                            <Table.Cell><Button style={{marginLeft: '2em'}}\r\n                                                                onClick={() => this.buyItem(item)} positive>\r\n                                                Acheter\r\n                                            </Button></Table.Cell>\r\n                                        </Table.Row>)\r\n                                    \r\n                                }\r\n                            )}\r\n                        </Table.Body>\r\n                    </Table>\r\n                </div>\r\n\r\n\r\n\r\n                        <Form onSubmit={this.handleSubmitForm} className=\"spacing\">\r\n                            <Form.Field>\r\n                                <label>Nom</label>\r\n                                <input value={name} name=\"name\" onChange={this.handleChange}/>\r\n                            </Form.Field>\r\n                            <Form.Field>\r\n                                <label>Argent</label>\r\n                                <input value={money} name=\"money\" onChange={this.handleChange}/>\r\n                            </Form.Field>\r\n                            <Form.Field>\r\n                                <label>Score</label>\r\n                                <input value={score} name=\"score\" onChange={this.handleChange}/>\r\n                            </Form.Field>\r\n                            <Form.Group inline>\r\n                                <label>Faction</label>\r\n                                <Form.Radio\r\n                                    label={nameParser('OUVRIER')}\r\n                                    value=\"OUVRIER\"\r\n                                    checked={faction === 'OUVRIER'}\r\n                                    onClick={() => this.handleChangeRadio('OUVRIER')}\r\n                                />\r\n                                <Form.Radio\r\n                                    label={nameParser('NOBLE')}\r\n                                    value=\"NOBLE\"\r\n                                    checked={faction === 'NOBLE'}\r\n                                    onClick={() => this.handleChangeRadio('NOBLE')}\r\n                                />\r\n                                <Form.Radio\r\n                                    label={nameParser('AMET')}\r\n                                    value=\"AMET\"\r\n                                    checked={faction === 'AMET'}\r\n                                    onClick={() => this.handleChangeRadio('AMET')}\r\n                                />\r\n                            </Form.Group>\r\n                            <Button onClick={() => this.handleSubmitChangeTeam()}>Modifier l&apos;équipe</Button>\r\n                        </Form>\r\n                    </div>\r\n                ) : (\r\n                    <div>\r\n                        <Form>\r\n                            <Form.Group inline>\r\n                                <label>Faction</label>\r\n                                <Form.Radio\r\n                                    label={nameParser('OUVRIER')}\r\n                                    value=\"OUVRIER\"\r\n                                    checked={faction === 'OUVRIER'}\r\n                                    onClick={() => this.handleChangeRadio('OUVRIER')}\r\n                                />\r\n                                <Form.Radio\r\n                                    label={nameParser('NOBLE')}\r\n                                    value=\"NOBLE\"\r\n                                    checked={faction === 'NOBLE'}\r\n                                    onClick={() => this.handleChangeRadio('NOBLE')}\r\n                                />\r\n                                <Form.Radio\r\n                                    label={nameParser('AMET')}\r\n                                    value=\"AMET\"\r\n                                    checked={faction === 'AMET'}\r\n                                    onClick={() => this.handleChangeRadio('AMET')}\r\n                                />\r\n                            </Form.Group>\r\n                            <Button onClick={() => this.handleSubmitChangeTeam()}>Modifier l&apos;équipe</Button>\r\n                        </Form>\r\n                    </div>\r\n                )\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nTeamGestion.propTypes = {\r\n    admin: PropTypes.bool.isRequired,\r\n    team: PropTypes.shape({\r\n        id: PropTypes.number,\r\n        picture: PropTypes.string,\r\n        name: PropTypes.string,\r\n        faction: PropTypes.oneOf(['NOBLE', 'OUVRIER', 'AMET']),\r\n        score: PropTypes.number,\r\n        money: PropTypes.number,\r\n    }).isRequired,\r\n    updatePic: PropTypes.func.isRequired,\r\n    updateState: PropTypes.func.isRequired,\r\n};\r\n\r\nTeamGestion.defaultProp = {\r\n    admin: false,\r\n\r\n};\r\n\r\nexport default TeamGestion;\r\n"]},"metadata":{},"sourceType":"module"}