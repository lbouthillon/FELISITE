{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\louis\\\\killer\\\\front\\\\src\\\\pages\\\\admin\\\\users.jsx\";\nimport React, { Component } from 'react';\nimport { Segment, Loader, Card, Icon, Input } from 'semantic-ui-react';\nimport axios from 'axios';\nimport underscore from 'underscore';\nimport CardUser from '../../components/user/CardUser';\nimport config from '../../config.json';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Users extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      users: [],\n      loading: true,\n      search: [],\n      val: ''\n    };\n    this.fetchData = this.fetchData.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchData(0);\n  }\n\n  fetchData(offset) {\n    const value = this.state.val.toLowerCase();\n    axios({\n      method: 'get',\n      url: `${config.back_Url}/users`,\n      headers: {\n        Token: localStorage.getItem('killerToken')\n      },\n      params: {\n        offset\n      }\n    }).then(data => {\n      if (data.data.status === 200) {\n        const search = [];\n        const arr = [...this.state.users, ...data.data.object];\n        arr.forEach(user => {\n          if (user.pseudo !== null) {\n            if (user.pseudo.toLowerCase().indexOf(value) > -1) {\n              search.push(user);\n              return;\n            }\n          }\n\n          if (`${user.lastName} ${user.firstName}`.toLowerCase().indexOf(value) > -1) {\n            search.push(user);\n          }\n        });\n\n        if (data.data.object.length === 10) {\n          this.setState({\n            loading: true,\n            users: arr,\n            search\n          });\n          this.fetchData(offset + 10);\n        } else {\n          this.setState({\n            users: arr,\n            search,\n            loading: false\n          });\n        }\n      }\n    });\n  }\n\n  handleChange(event, data) {\n    const value = data.value.toLowerCase();\n    const search = [];\n    this.state.users.forEach(user => {\n      if (user.pseudo !== null) {\n        if (user.pseudo.toLowerCase().indexOf(value) > -1) {\n          search.push(user);\n          return;\n        }\n      }\n\n      if (`${user.lastName} ${user.firstName}`.toLowerCase().indexOf(value) > -1) {\n        search.push(user);\n      }\n    });\n    this.setState({\n      search,\n      val: data.value\n    });\n  }\n\n  render() {\n    if (this.state.users == null) {\n      return /*#__PURE__*/_jsxDEV(Segment, {\n        className: \"Loading\",\n        children: /*#__PURE__*/_jsxDEV(Loader, {\n          active: true,\n          className: \"test\",\n          children: \"Loading\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bodyDesktop\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spacer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Segment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Joueurs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          focus: true,\n          placeholder: \"Search...\",\n          onChange: this.handleChange,\n          className: \"InputDesktop\",\n          size: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card.Group, {\n          doubling: true,\n          centered: true,\n          itemsPerRow: 6,\n          className: \"centered\",\n          children: underscore.map(this.state.search, user => /*#__PURE__*/_jsxDEV(CardUser, {\n            user: user,\n            admin: true\n          }, user.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), this.state.loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"SmallLoading\",\n          children: [/*#__PURE__*/_jsxDEV(Icon, {\n            size: \"large\",\n            loading: true,\n            name: \"redo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 15\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spacer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/louis/killer/front/src/pages/admin/users.jsx"],"names":["React","Component","Segment","Loader","Card","Icon","Input","axios","underscore","CardUser","config","Users","constructor","props","state","users","loading","search","val","fetchData","bind","handleChange","componentDidMount","offset","value","toLowerCase","method","url","back_Url","headers","Token","localStorage","getItem","params","then","data","status","arr","object","forEach","user","pseudo","indexOf","push","lastName","firstName","length","setState","event","render","map","id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {\r\n  Segment, Loader, Card, Icon, Input,\r\n} from 'semantic-ui-react';\r\nimport axios from 'axios';\r\nimport underscore from 'underscore';\r\n\r\nimport CardUser from '../../components/user/CardUser';\r\n\r\nimport config from '../../config.json';\r\n\r\nexport default class Users extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      users: [],\r\n      loading: true,\r\n      search: [],\r\n      val: '',\r\n    };\r\n\r\n    this.fetchData = this.fetchData.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData(0);\r\n  }\r\n\r\n  fetchData(offset) {\r\n    const value = this.state.val.toLowerCase();\r\n    axios({\r\n      method: 'get',\r\n      url: `${config.back_Url}/users`,\r\n      headers: { Token: localStorage.getItem('killerToken') },\r\n      params: {\r\n        offset,\r\n      },\r\n    }).then((data) => {\r\n      if (data.data.status === 200) {\r\n        const search = [];\r\n        const arr = [\r\n          ...this.state.users,\r\n          ...data.data.object,\r\n        ];\r\n        arr.forEach((user) => {\r\n          if (user.pseudo !== null) {\r\n            if (user.pseudo.toLowerCase().indexOf(value) > -1) {\r\n              search.push(user);\r\n              return;\r\n            }\r\n          }\r\n          if ((`${user.lastName} ${user.firstName}`).toLowerCase().indexOf(value) > -1) {\r\n            search.push(user);\r\n          }\r\n        });\r\n        if (data.data.object.length === 10) {\r\n          this.setState({\r\n            loading: true,\r\n            users: arr,\r\n            search,\r\n          });\r\n          this.fetchData(offset + 10);\r\n        } else {\r\n          this.setState({\r\n            users: arr,\r\n            search,\r\n            loading: false,\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  handleChange(event, data) {\r\n    const value = data.value.toLowerCase();\r\n    const search = [];\r\n    this.state.users.forEach((user) => {\r\n      if (user.pseudo !== null) {\r\n        if (user.pseudo.toLowerCase().indexOf(value) > -1) {\r\n          search.push(user);\r\n          return;\r\n        }\r\n      }\r\n      if ((`${user.lastName} ${user.firstName}`).toLowerCase().indexOf(value) > -1) {\r\n        search.push(user);\r\n      }\r\n    });\r\n    this.setState({\r\n      search,\r\n      val: data.value,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.users == null) {\r\n      return (\r\n        <Segment className=\"Loading\">\r\n          <Loader active className=\"test\">Loading</Loader>\r\n        </Segment>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"bodyDesktop\">\r\n        <div className=\"spacer\" />\r\n        <Segment>\r\n          <h2>Joueurs</h2>\r\n          <Input focus placeholder=\"Search...\" onChange={this.handleChange} className=\"InputDesktop\" size=\"large\"/>\r\n          <Card.Group doubling centered itemsPerRow={6} className=\"centered\">\r\n            {underscore.map(this.state.search, (user) => (\r\n              <CardUser user={user} key={user.id} admin />))}\r\n          </Card.Group>\r\n          {this.state.loading\r\n            ? (\r\n              <div className=\"SmallLoading\">\r\n                <Icon size=\"large\" loading name=\"redo\" />\r\n                <p>Loading...</p>\r\n              </div>\r\n            )\r\n            : null}\r\n        </Segment>\r\n        <div className=\"spacer\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}