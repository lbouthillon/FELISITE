{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\louis\\\\killer\\\\front\\\\src\\\\pages\\\\admin\\\\message.jsx\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport underscore from 'underscore';\nimport { Segment, Comment } from 'semantic-ui-react';\nimport config from '../../config.json';\nimport Message from '../../components/message/message';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Messages extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleDelete = id => {\n      axios({\n        method: 'delete',\n        url: `${config.back_Url}/messages/${id}`,\n        headers: {\n          Token: localStorage.getItem('killerToken')\n        }\n      }).then(data => {\n        if (data.data.status === 200) {\n          if (data.data.object === true) {\n            const list = [];\n            this.state.messages.map(message => {\n              if (message.id !== id) {\n                list.push(message);\n              }\n\n              return 0;\n            });\n            this.setState({\n              messages: list\n            });\n          }\n        }\n      });\n    };\n\n    this.state = {\n      messages: []\n    };\n  }\n\n  componentDidMount() {\n    this.fetchData(0);\n  }\n\n  fetchData(offset) {\n    axios({\n      method: 'get',\n      url: `${config.back_Url}/messages`,\n      headers: {\n        Token: localStorage.getItem('killerToken')\n      },\n      params: {\n        offset\n      }\n    }).then(data => {\n      if (data.data.status === 200) {\n        if (data.data.object.length === 10) {\n          this.setState(ps => ({\n            messages: [...ps.messages, ...data.data.object]\n          }));\n          this.fetchData(offset + 10);\n        } else {\n          this.setState(ps => ({\n            messages: [...ps.messages, ...data.data.object]\n          }));\n        }\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bodyDesktop\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spacer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Segment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Messages\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Comment.Group, {\n          children: this.state.messages.length === 0 ? \"Il n'y a aucun message pour l'instant\" : underscore.map(this.state.messages, message => /*#__PURE__*/_jsxDEV(Message, {\n            id: message.id,\n            titre: message.titre,\n            texte: message.texte,\n            faction: message.faction,\n            admin: \"true\",\n            handleDelete: this.handleDelete\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 67\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spacer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spacer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/louis/killer/front/src/pages/admin/message.jsx"],"names":["React","Component","axios","underscore","Segment","Comment","config","Message","Messages","constructor","props","handleDelete","id","method","url","back_Url","headers","Token","localStorage","getItem","then","data","status","object","list","state","messages","map","message","push","setState","componentDidMount","fetchData","offset","params","length","ps","render","titre","texte","faction"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,OAAT,EAAkBC,OAAlB,QAAiC,mBAAjC;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,OAAOC,OAAP,MAAoB,kCAApB;;AAEA,eAAe,MAAMC,QAAN,SAAuBP,SAAvB,CAAiC;AAC9CQ,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAWnBC,YAXmB,GAWHC,EAAD,IAAQ;AACrBV,MAAAA,KAAK,CAAC;AACJW,QAAAA,MAAM,EAAE,QADJ;AAEJC,QAAAA,GAAG,EAAG,GAAER,MAAM,CAACS,QAAS,aAAYH,EAAG,EAFnC;AAGJI,QAAAA,OAAO,EAAE;AAAEC,UAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,aAArB;AAAT;AAHL,OAAD,CAAL,CAIGC,IAJH,CAISC,IAAD,IAAU;AAChB,YAAIA,IAAI,CAACA,IAAL,CAAUC,MAAV,KAAqB,GAAzB,EAA8B;AAC5B,cAAID,IAAI,CAACA,IAAL,CAAUE,MAAV,KAAqB,IAAzB,EAA+B;AAC7B,kBAAMC,IAAI,GAAG,EAAb;AACA,iBAAKC,KAAL,CAAWC,QAAX,CAAoBC,GAApB,CAAyBC,OAAD,IAAa;AACnC,kBAAIA,OAAO,CAAChB,EAAR,KAAeA,EAAnB,EAAuB;AACrBY,gBAAAA,IAAI,CAACK,IAAL,CAAUD,OAAV;AACD;;AACD,qBAAO,CAAP;AACD,aALD;AAMA,iBAAKE,QAAL,CAAc;AAAEJ,cAAAA,QAAQ,EAAEF;AAAZ,aAAd;AACD;AACF;AACF,OAjBD;AAkBD,KA9BkB;;AAEjB,SAAKC,KAAL,GAAa;AACXC,MAAAA,QAAQ,EAAE;AADC,KAAb;AAGD;;AAEDK,EAAAA,iBAAiB,GAAG;AAClB,SAAKC,SAAL,CAAe,CAAf;AACD;;AAuBDA,EAAAA,SAAS,CAACC,MAAD,EAAS;AAChB/B,IAAAA,KAAK,CAAC;AACJW,MAAAA,MAAM,EAAE,KADJ;AAEJC,MAAAA,GAAG,EAAG,GAAER,MAAM,CAACS,QAAS,WAFpB;AAGJC,MAAAA,OAAO,EAAE;AAAEC,QAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,aAArB;AAAT,OAHL;AAIJe,MAAAA,MAAM,EAAE;AACND,QAAAA;AADM;AAJJ,KAAD,CAAL,CAOGb,IAPH,CAOSC,IAAD,IAAU;AAChB,UAAIA,IAAI,CAACA,IAAL,CAAUC,MAAV,KAAqB,GAAzB,EAA8B;AAC5B,YAAID,IAAI,CAACA,IAAL,CAAUE,MAAV,CAAiBY,MAAjB,KAA4B,EAAhC,EAAoC;AAClC,eAAKL,QAAL,CAAeM,EAAD,KAAS;AACrBV,YAAAA,QAAQ,EAAE,CACR,GAAGU,EAAE,CAACV,QADE,EAER,GAAGL,IAAI,CAACA,IAAL,CAAUE,MAFL;AADW,WAAT,CAAd;AAMA,eAAKS,SAAL,CAAeC,MAAM,GAAG,EAAxB;AACD,SARD,MAQO;AACL,eAAKH,QAAL,CAAeM,EAAD,KACZ;AACEV,YAAAA,QAAQ,EAAE,CACR,GAAGU,EAAE,CAACV,QADE,EAER,GAAGL,IAAI,CAACA,IAAL,CAAUE,MAFL;AADZ,WADY,CAAd;AAQD;AACF;AACF,KA5BD;AA6BD;;AAEDc,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,cADF,eAEE,QAAC,OAAD;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,OAAD,CAAS,KAAT;AAAA,oBACG,KAAKZ,KAAL,CAAWC,QAAX,CAAoBS,MAApB,KAA+B,CAA/B,GACG,uCADH,GAEGhC,UAAU,CAACwB,GAAX,CAAe,KAAKF,KAAL,CAAWC,QAA1B,EAAqCE,OAAD,iBAAc,QAAC,OAAD;AAAS,YAAA,EAAE,EAAEA,OAAO,CAAChB,EAArB;AAAyB,YAAA,KAAK,EAAEgB,OAAO,CAACU,KAAxC;AAA+C,YAAA,KAAK,EAAEV,OAAO,CAACW,KAA9D;AAAqE,YAAA,OAAO,EAAEX,OAAO,CAACY,OAAtF;AAA+F,YAAA,KAAK,EAAC,MAArG;AAA4G,YAAA,YAAY,EAAE,KAAK7B;AAA/H;AAAA;AAAA;AAAA;AAAA,kBAAlD;AAHN;AAAA;AAAA;AAAA;AAAA,gBAFF,eAQE;AAAK,UAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,gBARF;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,eAYE;AAAK,QAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,cAZF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAgBD;;AAlF6C","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport underscore from 'underscore';\r\nimport { Segment, Comment } from 'semantic-ui-react';\r\nimport config from '../../config.json';\r\n\r\nimport Message from '../../components/message/message';\r\n\r\nexport default class Messages extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      messages: [],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchData(0);\r\n  }\r\n\r\n  handleDelete = (id) => {\r\n    axios({\r\n      method: 'delete',\r\n      url: `${config.back_Url}/messages/${id}`,\r\n      headers: { Token: localStorage.getItem('killerToken') },\r\n    }).then((data) => {\r\n      if (data.data.status === 200) {\r\n        if (data.data.object === true) {\r\n          const list = [];\r\n          this.state.messages.map((message) => {\r\n            if (message.id !== id) {\r\n              list.push(message);\r\n            }\r\n            return 0;\r\n          });\r\n          this.setState({ messages: list });\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  fetchData(offset) {\r\n    axios({\r\n      method: 'get',\r\n      url: `${config.back_Url}/messages`,\r\n      headers: { Token: localStorage.getItem('killerToken') },\r\n      params: {\r\n        offset,\r\n      },\r\n    }).then((data) => {\r\n      if (data.data.status === 200) {\r\n        if (data.data.object.length === 10) {\r\n          this.setState((ps) => ({\r\n            messages: [\r\n              ...ps.messages,\r\n              ...data.data.object,\r\n            ],\r\n          }));\r\n          this.fetchData(offset + 10);\r\n        } else {\r\n          this.setState((ps) => (\r\n            {\r\n              messages: [\r\n                ...ps.messages,\r\n                ...data.data.object,\r\n              ],\r\n            }\r\n          ));\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"bodyDesktop\">\r\n        <div className=\"spacer\" />\r\n        <Segment>\r\n          <h2>Messages</h2>\r\n          <Comment.Group>\r\n            {this.state.messages.length === 0\r\n              ? \"Il n'y a aucun message pour l'instant\"\r\n              : underscore.map(this.state.messages, (message) => (<Message id={message.id} titre={message.titre} texte={message.texte} faction={message.faction} admin=\"true\" handleDelete={this.handleDelete} />))}\r\n\r\n          </Comment.Group>\r\n          <div className=\"spacer\" />\r\n        </Segment>\r\n        <div className=\"spacer\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}